/**
 * ========================================
 * AUTO-ANIMATE SCRIPT
 * ========================================
 * 
 * Automatically adds smooth animation classes to all main sections
 * This script runs after the page loads to ensure all sections get animations
 */

(function() {
    'use strict';

    // Configuration for auto-animation
    const AUTO_ANIMATE_CONFIG = {
        // Selectors for main content sections
        sectionSelectors: [
            'section[data-framer-name*="Section"]',
            'section[data-framer-name*="Hero"]',
            'section[data-framer-name*="Works"]',
            'section[data-framer-name*="About"]',
            'section[data-framer-name*="Contact"]',
            'section[data-framer-name*="Process"]',
            'section[data-framer-name*="Skills"]',
            'section[data-framer-name*="Experience"]',
            'section[data-framer-name*="Testimonial"]',
            'section[data-framer-name*="Blog"]',
            'section[data-framer-name*="Article"]'
        ],
        
        // Animation types for different sections
        animationTypes: {
            'Hero': 'slide-up',
            'Works': 'slide-up',
            'About': 'slide-up',
            'Contact': 'slide-up',
            'Process': 'slide-up',
            'Skills': 'slide-up',
            'Experience': 'slide-up',
            'Testimonial': 'slide-up',
            'Blog': 'slide-up',
            'Article': 'slide-up',
            'default': 'slide-up'
        },
        
        // Delay configuration for staggered animations
        delays: {
            'Hero': 0,
            'Works': 1,
            'About': 2,
            'Contact': 3,
            'Process': 1,
            'Skills': 2,
            'Experience': 3,
            'Testimonial': 1,
            'Blog': 2,
            'Article': 1,
            'default': 0
        }
    };

    /**
     * Get animation type for a section based on its name
     */
    function getAnimationType(sectionName) {
        for (const [key, value] of Object.entries(AUTO_ANIMATE_CONFIG.animationTypes)) {
            if (sectionName.includes(key)) {
                return value;
            }
        }
        return AUTO_ANIMATE_CONFIG.animationTypes.default;
    }

    /**
     * Get delay class for a section based on its name
     */
    function getDelayClass(sectionName) {
        for (const [key, value] of Object.entries(AUTO_ANIMATE_CONFIG.delays)) {
            if (sectionName.includes(key)) {
                return value > 0 ? `delay-${value}` : '';
            }
        }
        return '';
    }

    /**
     * Add animation classes to a section
     */
    function addAnimationClasses(section) {
        const sectionName = section.getAttribute('data-framer-name') || '';
        const animationType = getAnimationType(sectionName);
        const delayClass = getDelayClass(sectionName);
        
        // Build the class string
        let classes = 'smooth-animate';
        if (animationType) {
            classes += ` ${animationType}`;
        }
        if (delayClass) {
            classes += ` ${delayClass}`;
        }
        
        // Add the classes to the section
        section.className = section.className + ' ' + classes;
        
        console.log(`Added animation classes to section: ${sectionName} -> ${classes}`);
    }

    /**
     * Add animation classes to all main sections
     */
    function addAnimationsToAllSections() {
        let sectionsFound = 0;
        
        AUTO_ANIMATE_CONFIG.sectionSelectors.forEach(selector => {
            const sections = document.querySelectorAll(selector);
            sections.forEach(section => {
                // Only add if it doesn't already have smooth-animate class
                if (!section.classList.contains('smooth-animate')) {
                    addAnimationClasses(section);
                    sectionsFound++;
                }
            });
        });
        
        console.log(`Auto-animate: Added animations to ${sectionsFound} sections`);
        
        // Also add animations to any other main content containers
        const additionalSelectors = [
            'main > div',
            '.framer-root > div',
            '[data-framer-component-type="Container"]'
        ];
        
        additionalSelectors.forEach(selector => {
            const elements = document.querySelectorAll(selector);
            elements.forEach((element, index) => {
                if (!element.classList.contains('smooth-animate') && 
                    element.offsetHeight > 100) { // Only animate substantial elements
                    const delayClass = index > 0 ? `delay-${Math.min(index, 6)}` : '';
                    element.className = element.className + ` smooth-animate slide-up ${delayClass}`;
                    sectionsFound++;
                }
            });
        });
        
        console.log(`Auto-animate: Total sections animated: ${sectionsFound}`);
    }

    /**
     * Initialize auto-animation
     */
    function initAutoAnimate() {
        // Wait for DOM to be fully loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', addAnimationsToAllSections);
        } else {
            // DOM is already loaded
            addAnimationsToAllSections();
        }
        
        // Also run after a short delay to catch any dynamically loaded content
        setTimeout(addAnimationsToAllSections, 1000);
    }

    // Initialize when script loads
    initAutoAnimate();

    // Make it available globally for manual triggering
    window.autoAnimate = {
        addAnimations: addAnimationsToAllSections,
        config: AUTO_ANIMATE_CONFIG
    };

})();
